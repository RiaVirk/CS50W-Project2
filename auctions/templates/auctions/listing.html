{% extends "auctions/layout.html" %}

{% block body %}

<div class="row">
    {% if user.is_authenticated%}
        {% if isListingInWatchlist %}
                <form action="{% url 'removeWatchlist' id=listing.id %}" method="POST">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">Remove from Watchlist</button>
                </form>
        {% else %}
                <form action="{% url 'addWatchlist' id=listing.id %}" method="POST">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-success">Add to Watchlist</button>
                </form>
        {%endif%}
    {%endif%}
</div>


<h2>Pokemon: {{ listing.title }} </h2>
<img src=" {{ listing.imageUrl}} " alt="{{listing.title}}" height="300px">
<p>{{listing.description}}</p>
<p>Owner: {{listing.owner}} </p>
<h4>${{listing.price}} </h4>


    <h2>Comments</h2>
    {% if user.is_authenticated%}
        <form class="row g-3" action="{% url 'addComment' id=listing.id %}" method="POST">
            {% csrf_token %}
            {% comment %} <div class="col-2">
                <label for="addComment" class="form-label">Add Comment</label>
              </div> {% endcomment %}
              <div class="col-6">
              <textarea class="form-control" name="addComment" rows="3" placeholder="Comments"></textarea>
            </div>
              <div class="col-3">
              <button type="submit" class="btn btn-success mt-3">Add Comment</button>
            </div>
        </form>
    {% endif %}
    </br>
    <ul class="list-group">
    {% for comment in allComments %}
    <li class="list-group-item">
        {{comment.message}}
    </br>
    <p>Commented by:  <strong>{{ comment.author}}</strong> </p>
    </li>
    {% endfor %}
    </ul>




{% endblock %}